{"version":3,"sources":["../../../../src/api/v1/restaurantes/ctrl.js"],"names":["router","get","req","res","next","resources","resourceService","getAllResources","json","value","error","id","params","resource","getResource","post","cnpj","validateBr","body","createResource","Error","message","put","updateResource","delete","deleteResource"],"mappings":"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","sourcesContent":["import { Router } from 'express';\nimport { validateBr } from 'js-brasil';\nimport * as resourceService from './service';\n\nconst router = Router();\n\nrouter.get('/', async (req, res, next) => {\n  try {\n    const resources = await resourceService.getAllResources();\n\n    return res.json({\n      value: resources,\n    });\n  } catch (error) {\n    return next(error);\n  }\n});\n\nrouter.get('/:id', async (req, res, next) => {\n  try {\n    const { id } = req.params;\n\n    const resource = await resourceService.getResource(id);\n\n    return res.json({\n      value: resource,\n    });\n  } catch (error) {\n    return next(error);\n  }\n});\n\nrouter.post('/', async (req, res, next) => {\n  try {\n    const cnpj = validateBr.cnpj(req.body.cnpj);\n\n    if (cnpj) {\n      let resource = await resourceService.createResource(req.body);\n      resource = await resourceService.getResource(resource.id);\n\n      return res.json({\n        value: resource,\n      });\n    }\n    throw new Error('CNPJ INVÃLIDO!');\n  } catch (error) {\n    return next(error.message);\n  }\n});\n\nrouter.put('/:id', async (req, res, next) => {\n  try {\n    const { id } = req.params;\n\n    let resource = await resourceService.updateResource(id, req.body);\n    resource = await resourceService.getResource(id);\n\n    return res.json({\n      value: resource,\n    });\n  } catch (error) {\n    return next(error);\n  }\n});\n\nrouter.delete('/:id', async (req, res, next) => {\n  try {\n    const { id } = req.params;\n    await resourceService.deleteResource(id);\n\n    return res.json({\n      value: id,\n    });\n  } catch (error) {\n    return next(error);\n  }\n});\n\nexport default router;\n"],"file":"ctrl.js"}