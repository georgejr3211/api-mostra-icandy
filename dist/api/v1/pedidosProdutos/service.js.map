{"version":3,"sources":["../../../../src/api/v1/pedidosProdutos/service.js"],"names":["getAllResources","offset","limit","s","resources","Resource","findAll","include","all","where","Op","or","like","order","getResource","id","resource","findByPk","getResourceByPedido","ativo","pedidos_id","createResource","create","updateResource","update","deleteResource","then","res","destroy"],"mappings":";;;;;;;;;;;;AAAA;;AACA;;;;AAEO,eAAeA,eAAf,CAA+BC,MAA/B,EAAuCC,KAAvC,EAA8CC,CAA9C,EAAiD;AACtD,QAAMC,SAAS,GAAG,MAAMC,eAASC,OAAT,CAAiB;AACvCC,IAAAA,OAAO,EAAE,CAAC;AAAEC,MAAAA,GAAG,EAAE;AAAP,KAAD,CAD8B;AAEvCC,IAAAA,KAAK,EAAE;AACL,OAACC,cAAGC,EAAJ,GAAS,CACP;AACA;AACA;AACA;AAAE,+BAAuB;AAAE,WAACD,cAAGE,IAAJ,GAAY,IAAGT,CAAE;AAAnB;AAAzB,OAJO,EAKP;AAAE,0BAAkB;AAAE,WAACO,cAAGE,IAAJ,GAAY,IAAGT,CAAE;AAAnB;AAApB,OALO,EAMP;AAAE,0BAAkB;AAAE,WAACO,cAAGE,IAAJ,GAAY,IAAGT,CAAE;AAAnB;AAApB,OANO,EAOP;AAAE,+BAAuB;AAAE,WAACO,cAAGE,IAAJ,GAAY,IAAGT,CAAE;AAAnB;AAAzB,OAPO;AADJ,KAFgC;AAavCU,IAAAA,KAAK,EAAE,CAAC,CAAC,IAAD,EAAO,MAAP,CAAD,CAbgC;AAcvCZ,IAAAA,MAduC;AAevCC,IAAAA;AAfuC,GAAjB,CAAxB;AAkBA,SAAOE,SAAP;AACD;;AAEM,eAAeU,WAAf,CAA2BC,EAA3B,EAA+B;AACpC,QAAMC,QAAQ,GAAG,MAAMX,eAASY,QAAT,CAAkBF,EAAlB,CAAvB;AAEA,SAAOC,QAAP;AACD;;AAEM,eAAeE,mBAAf,CAAmCH,EAAnC,EAAuC;AAC5C,QAAMC,QAAQ,GAAG,MAAMX,eAASC,OAAT,CAAiB;AACtCO,IAAAA,KAAK,EAAE,CAAC,CAAC,IAAD,EAAO,MAAP,CAAD,CAD+B;AAEtCN,IAAAA,OAAO,EAAE,CAAC;AAAEC,MAAAA,GAAG,EAAE;AAAP,KAAD,CAF6B;AAGtC;AACA;AACA;AACA;AACA;AACAC,IAAAA,KAAK,EAAE;AACLU,MAAAA,KAAK,EAAE,CADF;AAELC,MAAAA,UAAU,EAAEL;AAFP;AAR+B,GAAjB,CAAvB;AAaA,SAAOC,QAAP;AACD;;AAEM,SAASK,cAAT,CAAwBL,QAAxB,EAAkC;AACvC,SAAOX,eAASiB,MAAT,CAAgBN,QAAhB,CAAP;AACD;;AAEM,SAASO,cAAT,CAAwBR,EAAxB,EAA4BC,QAA5B,EAAsC;AAC3C,SAAOX,eAASmB,MAAT,CAAgBR,QAAhB,EAA0B;AAAEP,IAAAA,KAAK,EAAE;AAAEM,MAAAA;AAAF;AAAT,GAA1B,CAAP;AACD;;AAEM,SAASU,cAAT,CAAwBV,EAAxB,EAA4B;AACjC,SAAOV,eAASY,QAAT,CAAkBF,EAAlB,EAAsBW,IAAtB,CAA2BC,GAAG,IAAIA,GAAG,CAACC,OAAJ,EAAlC,CAAP;AACD","sourcesContent":["import { Op } from 'sequelize';\nimport Resource from './model';\n\nexport async function getAllResources(offset, limit, s) {\n  const resources = await Resource.findAll({\n    include: [{ all: true }],\n    where: {\n      [Op.or]: [\n        // { '$pedido.formas_pagamento_id$': { [Op.like]: `%${s}%` } },\n        // { '$pedido.usuarios_id$': { [Op.like]: `%${s}%` } },\n        // { '$pedido.status_pedido_id$': { [Op.like]: `%${s}%` } },\n        { '$pedido.observacao$': { [Op.like]: `%${s}%` } },\n        { '$pedido.troco$': { [Op.like]: `%${s}%` } },\n        { '$produto.nome$': { [Op.like]: `%${s}%` } },\n        { '$produto.descricao$': { [Op.like]: `%${s}%` } },\n      ],\n    },\n    order: [['id', 'DESC']],\n    offset,\n    limit,\n  });\n\n  return resources;\n}\n\nexport async function getResource(id) {\n  const resource = await Resource.findByPk(id);\n\n  return resource;\n}\n\nexport async function getResourceByPedido(id) {\n  const resource = await Resource.findAll({\n    order: [['id', 'DESC']],\n    include: [{ all: true }],\n    // include: [\n    //   {\n    //     association: Resource.Produto,\n    //     attributes: ['id', 'nome', 'preco'],\n    //   },\n    where: {\n      ativo: 1,\n      pedidos_id: id,\n    },\n  });\n  return resource;\n}\n\nexport function createResource(resource) {\n  return Resource.create(resource);\n}\n\nexport function updateResource(id, resource) {\n  return Resource.update(resource, { where: { id } });\n}\n\nexport function deleteResource(id) {\n  return Resource.findByPk(id).then(res => res.destroy());\n}\n"],"file":"service.js"}