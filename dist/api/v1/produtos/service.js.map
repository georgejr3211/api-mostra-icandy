{"version":3,"sources":["../../../../src/api/v1/produtos/service.js"],"names":["getAllResources","offset","limit","search","resources","Resource","findAll","include","all","where","nome","Op","like","qtd_estoque","gt","ativo","order","getResource","id","resource","findByPk","getResourceProdutosByIdForaEstoque","ids","in","createResource","create","updateResource","update","deleteResource","then","res","destroy"],"mappings":";;;;;;;;;;;;AAAA;;AACA;;;;AAEO,eAAeA,eAAf,CAA+BC,MAA/B,EAAuCC,KAAvC,EAA8CC,MAA9C,EAAsD;AAC3D,QAAMC,SAAS,GAAG,MAAMC,eAASC,OAAT,CAAiB;AACvCC,IAAAA,OAAO,EAAE,CAAC;AAAEC,MAAAA,GAAG,EAAE;AAAP,KAAD,CAD8B;AAEvCP,IAAAA,MAFuC;AAGvCC,IAAAA,KAHuC;AAIvCO,IAAAA,KAAK,EAAE;AACLC,MAAAA,IAAI,EAAE;AACJ,SAACC,cAAGC,IAAJ,GAAY,IAAGT,MAAO;AADlB,OADD;AAILU,MAAAA,WAAW,EAAE;AACX,SAACF,cAAGG,EAAJ,GAAS;AADE,OAJR;AAOLC,MAAAA,KAAK,EAAE;AAPF,KAJgC;AAavCC,IAAAA,KAAK,EAAE,CAAC,CAAC,IAAD,EAAO,MAAP,CAAD;AAbgC,GAAjB,CAAxB;AAeA,SAAOZ,SAAP;AACD;;AAEM,eAAea,WAAf,CAA2BC,EAA3B,EAA+B;AACpC,QAAMC,QAAQ,GAAG,MAAMd,eAASe,QAAT,CAAkBF,EAAlB,CAAvB;AAEA,SAAOC,QAAP;AACD;;AAEM,eAAeE,kCAAf,CAAkDC,GAAlD,EAAuD;AAC5D,QAAMH,QAAQ,GAAG,MAAMd,eAASC,OAAT,CAAiB;AACtCG,IAAAA,KAAK,EAAE,CACL;AACES,MAAAA,EAAE,EAAE;AACF,SAACP,cAAGY,EAAJ,GAASD;AADP;AADN,KADK;AAD+B,GAAjB,CAAvB;AAUA,SAAOH,QAAP;AACD;;AAEM,SAASK,cAAT,CAAwBL,QAAxB,EAAkC;AACvC,SAAOd,eAASoB,MAAT,CAAgBN,QAAhB,CAAP;AACD;;AAEM,SAASO,cAAT,CAAwBR,EAAxB,EAA4BC,QAA5B,EAAsC;AAC3C,SAAOd,eAASsB,MAAT,CAAgBR,QAAhB,EAA0B;AAAEV,IAAAA,KAAK,EAAE;AAAES,MAAAA;AAAF;AAAT,GAA1B,CAAP;AACD;;AAEM,SAASU,cAAT,CAAwBV,EAAxB,EAA4B;AACjC,SAAOb,eAASe,QAAT,CAAkBF,EAAlB,EAAsBW,IAAtB,CAA2BC,GAAG,IAAIA,GAAG,CAACC,OAAJ,EAAlC,CAAP;AACD","sourcesContent":["import { Op } from 'sequelize';\nimport Resource from './model';\n\nexport async function getAllResources(offset, limit, search) {\n  const resources = await Resource.findAll({\n    include: [{ all: true }],\n    offset,\n    limit,\n    where: {\n      nome: {\n        [Op.like]: `%${search}%`,\n      },\n      qtd_estoque: {\n        [Op.gt]: 0,\n      },\n      ativo: 1,\n    },\n    order: [['id', 'DESC']],\n  });\n  return resources;\n}\n\nexport async function getResource(id) {\n  const resource = await Resource.findByPk(id);\n\n  return resource;\n}\n\nexport async function getResourceProdutosByIdForaEstoque(ids) {\n  const resource = await Resource.findAll({\n    where: [\n      {\n        id: {\n          [Op.in]: ids,\n        },\n      },\n    ],\n  });\n\n  return resource;\n}\n\nexport function createResource(resource) {\n  return Resource.create(resource);\n}\n\nexport function updateResource(id, resource) {\n  return Resource.update(resource, { where: { id } });\n}\n\nexport function deleteResource(id) {\n  return Resource.findByPk(id).then(res => res.destroy());\n}\n"],"file":"service.js"}