{"version":3,"sources":["../../../../src/api/v1/avaliacoes/service.js"],"names":["getAllResources","resources","Resource","findOne","attributes","raw","getResource","id","resource","findByPk","createResource","create","updateResource","update","where","deleteResource","then","res","destroy"],"mappings":";;;;;;;;;;;AAAA;;AACA;;;;AAEO,eAAeA,eAAf,GAAiC;AACtC,QAAMC,SAAS,GAAG,MAAMC,eAASC,OAAT,CAAiB;AACvC;AACAC,IAAAA,UAAU,EAAE,CAAC,CAAC,mBAAG,KAAH,EAAU,oBAAI,WAAJ,CAAV,CAAD,EAA8B,cAA9B,CAAD,CAF2B;AAGvCC,IAAAA,GAAG,EAAE;AAHkC,GAAjB,CAAxB;AAMA,SAAOJ,SAAP;AACD;;AAEM,eAAeK,WAAf,CAA2BC,EAA3B,EAA+B;AACpC,QAAMC,QAAQ,GAAG,MAAMN,eAASO,QAAT,CAAkBF,EAAlB,CAAvB;AAEA,SAAOC,QAAP;AACD;;AAEM,SAASE,cAAT,CAAwBF,QAAxB,EAAkC;AACvC,SAAON,eAASS,MAAT,CAAgBH,QAAhB,CAAP;AACD;;AAEM,SAASI,cAAT,CAAwBL,EAAxB,EAA4BC,QAA5B,EAAsC;AAC3C,SAAON,eAASW,MAAT,CAAgBL,QAAhB,EAA0B;AAAEM,IAAAA,KAAK,EAAE;AAAEP,MAAAA;AAAF;AAAT,GAA1B,CAAP;AACD;;AAEM,SAASQ,cAAT,CAAwBR,EAAxB,EAA4B;AACjC,SAAOL,eAASO,QAAT,CAAkBF,EAAlB,EAAsBS,IAAtB,CAA2BC,GAAG,IAAIA,GAAG,CAACC,OAAJ,EAAlC,CAAP;AACD","sourcesContent":["import { fn, col } from 'sequelize';\nimport Resource from './model';\n\nexport async function getAllResources() {\n  const resources = await Resource.findOne({\n    // include: [{ all: true }],\n    attributes: [[fn('avg', col('avaliacao')), 'avgAvaliacao']],\n    raw: true,\n  });\n\n  return resources;\n}\n\nexport async function getResource(id) {\n  const resource = await Resource.findByPk(id);\n\n  return resource;\n}\n\nexport function createResource(resource) {\n  return Resource.create(resource);\n}\n\nexport function updateResource(id, resource) {\n  return Resource.update(resource, { where: { id } });\n}\n\nexport function deleteResource(id) {\n  return Resource.findByPk(id).then(res => res.destroy());\n}\n"],"file":"service.js"}